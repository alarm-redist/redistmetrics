<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using `redistmetrics` â€¢ redistmetrics</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using `redistmetrics`">
<meta property="og:description" content="redistmetrics">
<meta property="og:image" content="http://alarm-redist.org/redistmetrics/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">redistmetrics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/redistmetrics.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/party.html">Measures of Partisan Advantage</a>
    </li>
    <li>
      <a href="../articles/compactness.html">Measures of Compactness</a>
    </li>
    <li>
      <a href="../articles/splits.html">Measures of Administrative Splits</a>
    </li>
    <li>
      <a href="../articles/distances.html">Measures of Plan Distance</a>
    </li>
    <li>
      <a href="../articles/other.html">Other Measures</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/alarm-redist/redistmetrics/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using <code>redistmetrics</code>
</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/alarm-redist/redistmetrics/blob/HEAD/vignettes/redistmetrics.Rmd" class="external-link"><code>vignettes/redistmetrics.Rmd</code></a></small>
      <div class="hidden name"><code>redistmetrics.Rmd</code></div>

    </div>

    
    
<p><code>redistmetrics</code> provides an interface for computing common
redistricting measures and metrics. This covers the range of compactness
measures, partisan gerrymandering metrics, county splits, and more. The
goal is to provide a flexible and friendly (to existing R users)
implementation of scores which are often used in academic research,
litigation, public projects, and journalism. This package began as a set
of functions in <a href="https://CRAN.R-project.org/package=redist" class="external-link"><code>redist</code></a>.
While those features will remain, this package should offer friendlier
examples by separating out measures into their own functions.</p>
<p>The package is developed and maintained by the <a href="https://alarm-redist.github.io" class="external-link">ALARM Project</a>, the
ALgorithm-Assisted Redistricting Methodology Project,a research project
under the direction of Kosuke Imai. The code in this package was
developed by Christopher T. Kenny, Cory McCartan, and Ben Fifield. When
using the package, please cite the package using the following:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">'redistmetrics'</span><span class="op">)</span></span>
<span><span class="co">#&gt; To cite redistmetrics in publications use:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Christopher T. Kenny, Cory McCartan, Ben Fifield, and Kosuke Imai</span></span>
<span><span class="co">#&gt;   (2021). redistmetrics: Redistricting Metrics. Available at The</span></span>
<span><span class="co">#&gt;   Comprehensive R Archive Network (CRAN). URL</span></span>
<span><span class="co">#&gt;   https://github.com/alarm-redist/redistmetrics.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   @Misc{,</span></span>
<span><span class="co">#&gt;     title = {{redistmetrics}: Redistricting Metrics},</span></span>
<span><span class="co">#&gt;     author = {Christopher T. Kenny and Cory McCartan and Ben Fifield and Kosuke Imai},</span></span>
<span><span class="co">#&gt;     howpublished = {Available at The Comprehensive R Archive Network (CRAN)},</span></span>
<span><span class="co">#&gt;     year = {2021},</span></span>
<span><span class="co">#&gt;     url = {https://github.com/alarm-redist/redistmetrics},</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre></div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The package is fully open source and can be installed from
GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">'remotes'</span>)) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">install.packages</span>(<span class="st">'remotes'</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">'alarm-redist/redistmetrics)</span></span></code></pre></div>
<p>Once installed, the package can be loaded with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://alarm-redist.org/redistmetrics/">redistmetrics</a></span><span class="op">)</span></span></code></pre></div>
<p>For example purposes, we include data about New Hampshireâ€™s political
geography and demographics. The following data is included:</p>
<ul>
<li>
<code>nh</code>: a <code>tibble</code> with geographic data, an
adjacency graph, past electoral data, 2020 Census demographics, and two
proposed NH redistricting plans</li>
<li>
<code>nh_m</code>: a matrix of 52 redistricting plans, where the
first two are the proposed plans in <code>nh</code> and the next 50 are
simulated alternative plans</li>
</ul>
<p>For users of <code>redist</code>, we also provide example data using
<code>redist</code> objects, which offer some desirable features
available via <code>redist</code>: - <code>nh_map</code>: a
<code>redist_map</code> version of <code>nh</code> -
<code>nh_plans</code>: a <code>redist_plans</code> version of
<code>nh_plans</code></p>
<p>Each of these can be loaded with the <code><a href="https://rdrr.io/r/utils/data.html" class="external-link">data()</a></code>
function.</p>
</div>
<div class="section level2">
<h2 id="running-your-first-measure">Running your first measure<a class="anchor" aria-label="anchor" href="#running-your-first-measure"></a>
</h2>
<p>Given some data set where the districts are indicated, we can begin
to compute measures.</p>
<p>We start with <code>nh</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">nh</span><span class="op">)</span></span></code></pre></div>
<p>Functions in <code>redistmetrics</code> use common prefixes to
indicate their usage. The prefixes in the current version are:</p>
<ul>
<li>
<code>comp_</code>: compactness measures</li>
<li>
<code>part_</code>: partisan measures</li>
<li>
<code>dist_</code>: distance-between-plan measures</li>
<li>
<code>splits_</code>: administrative split measures</li>
<li>
<code>seg_</code>: segregation measures (currently limited in
scope)</li>
<li>
<code>inc_</code>: incumbent pairing measures (currently limited in
scope)</li>
<li>
<code>compet_</code>: competitiveness measures (currently limited in
scope)</li>
</ul>
<p>With these, we can pick a measure that weâ€™d like to compute, say the
Reock compactness, via <code><a href="../reference/comp_reock.html">comp_reock()</a></code>. The major arguments
are then the <code>plans</code>, or what the redistricting plan is, and
the <code>shp</code>, which is the geography that the district is based
on. Notably, <code>comp_</code> functions also typically take an
<code>epsg</code> argument which has the goal of converting the object
to a projected map. This allows for more accurate measurement by more
correctly describing the relative location of points on a map.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_reock.html">comp_reock</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.4444653 0.2502152</span></span></code></pre></div>
<p>The output here is two Reock scores, the first being for the first
district and the second for the second.</p>
<p>We can similar look at a partisan score, perhaps the efficiency gap,
via <code><a href="../reference/part_egap.html">part_egap()</a></code>. This takes additional arguments. As
before, it wants the <code>plans</code> defining the assignment to
districts, along with a <code>shp</code> object, which just contains the
next two columns: <code>rvote</code> (votes for Republicans) and
<code>dvote</code> (votes for Democrats).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/part_egap.html">part_egap</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, </span>
<span>          rvote <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">pre_20_rep_tru</span>, dvote <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">pre_20_dem_bid</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.08171976 0.08171976</span></span></code></pre></div>
<p>As the variable names suggest, we compute the Efficiency Gap using
2020 presidential data. Now, because the Efficiency Gap is defined for a
plan, rather than by district, it is repeated here for each district for
consistency.</p>
<p>If you want a plan-level metric to not be repeated, you can pipe
through to <code>by_plan</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/part_egap.html">part_egap</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, </span>
<span>          rvote <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">pre_20_rep_tru</span>, dvote <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">pre_20_dem_bid</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="../reference/by_plan.html">by_plan</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.08171976</span></span></code></pre></div>
<p>For more information, view the other vignettes or the <a href="https://alarm-redist.github.io/redistmetrics/index.html" class="external-link">package
website</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Christopher T. Kenny, Cory McCartan, Ben Fifield, Kosuke Imai.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
