<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="redistmetrics">
<title>Measures of Compactness • redistmetrics</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Measures of Compactness">
<meta property="og:description" content="redistmetrics">
<meta property="og:image" content="https://alarm-redist.github.io/redistmetrics/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">redistmetrics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/redistmetrics.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/party.html">Measures of Partisan Advantage</a>
    <a class="dropdown-item" href="../articles/compactness.html">Measures of Compactness</a>
    <a class="dropdown-item" href="../articles/splits.html">Measures of Administrative Splits</a>
    <a class="dropdown-item" href="../articles/distances.html">Measures of Plan Distance</a>
    <a class="dropdown-item" href="../articles/other.html">Other Measures</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/alarm-redist/redistmetrics/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">
<script src="compactness_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Measures of Compactness</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/alarm-redist/redistmetrics/blob/HEAD/vignettes/compactness.Rmd" class="external-link"><code>vignettes/compactness.Rmd</code></a></small>
      <div class="d-none name"><code>compactness.Rmd</code></div>
    </div>

    
    
<p>There are dozens of measures of compactness. This vignette introduces some of the most common and most important measures of compactness. See the vignette “Using <code>redistmetrics</code>” for the bare-bones of the package.</p>
<p>We first load the <code>redistmetrics</code> package and data from New Hampshire. For any function, the <code>shp</code> argument can be swapped out for your data and the <code>plans</code> argument can be swapped out for your redistricting plans (be it a single plan, a matrix of plans, or a <code>redist_plans</code> object).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://alarm-redist.github.io/redistmetrics/">redistmetrics</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">nh</span><span class="op">)</span></code></pre></div>
<p>The New Hampshire proposed Republican plan looks like:</p>
<p><img src="compactness_files/figure-html/unnamed-chunk-2-1.png" width="700"></p>
<div class="section level1">
<h1 id="area-based-compactness">Area-Based Compactness<a class="anchor" aria-label="anchor" href="#area-based-compactness"></a>
</h1>
<div class="section level2">
<h2 id="polsby-popper-compactness">Polsby-Popper Compactness<a class="anchor" aria-label="anchor" href="#polsby-popper-compactness"></a>
</h2>
<p>Polsby-Popper is proportional to the ratio of a districts area (<span class="math inline">\(A_D\)</span>) and its perimeter (<span class="math inline">\(P_D\)</span>). Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Polsby-Popper} = 4\pi\frac{A_D}{P_D}\]</span> Scores range from 0 to 1, where 0 is the least compact and 1 is the most compact.</p>
<p>Polsby-Popper compactness can be computed with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_polsby.html">comp_polsby</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.2324375 0.1582763</span></code></pre></div>
<div class="section level3">
<h3 id="schwartzberg-compactness">Schwartzberg Compactness<a class="anchor" aria-label="anchor" href="#schwartzberg-compactness"></a>
</h3>
<p>Schwartzberg Compactness is similar to Polsby-Popper compactness and is also based on the comparison of a district’s perimeter (<span class="math inline">\(P_D\)</span>) to its area (<span class="math inline">\(A_D\)</span>). Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Schwartzberg} = \frac{1}{\frac{P_D}{2\pi\sqrt{A_D/\pi}}}\]</span></p>
<p>Scores range from 0 to 1, where 0 is the least compact and 1 is the most compact.</p>
<p>Schwartzberg compactness can be computed with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_schwartz.html">comp_schwartz</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.4821177 0.3978395</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="reock-compactness">Reock Compactness<a class="anchor" aria-label="anchor" href="#reock-compactness"></a>
</h3>
<p>Reock compactness compares the area of the district (<span class="math inline">\(A_D\)</span>) to the area of the minimum bounding circle (<span class="math inline">\(A_{MBC}\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Reock} = \frac{A_D}{A_{MBC}} \]</span> Scores range from 0 to 1, where 0 is the least compact and 1 is the most compact.</p>
<p>Reock compactness can be computed with:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_reock.html">comp_reock</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.4444653 0.2502152</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="box-reock-compactness">Box Reock Compactness<a class="anchor" aria-label="anchor" href="#box-reock-compactness"></a>
</h3>
<p>Box Reock compactness compares the area of the district (<span class="math inline">\(A_D\)</span>) to the area of the minimum bounding rectangle (<span class="math inline">\(A_{MBR}\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Box Reock} = \frac{A_D}{A_{MBR}} \]</span></p>
<p>Scores range from 0 to 1, where 0 is the least compact and 1 is the most compact.</p>
<p>Box Reock compactness can be computed with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_box_reock.html">comp_box_reock</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.5769441 0.4196260</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="convex-hull-compactness">Convex Hull Compactness<a class="anchor" aria-label="anchor" href="#convex-hull-compactness"></a>
</h3>
<p>Convex Hull compactness compares the area of the district (<span class="math inline">\(A_D\)</span>) to the area of the convex hull (<span class="math inline">\(A_{CV}\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Convex Hull} = \frac{A_D}{A_{CV}} \]</span> Scores range from 0 to 1, where 0 is the least compact and 1 is the most compact.</p>
<p>Convex Hull compactness can be computed with:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_ch.html">comp_ch</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.6763964 0.6626738</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="skew-compactness">Skew Compactness<a class="anchor" aria-label="anchor" href="#skew-compactness"></a>
</h3>
<p>Skew compactness compares the area of the maximum inscribed circle (<span class="math inline">\(A_{MIC}\)</span>) to the area of the minimum bounding circle (<span class="math inline">\(A_{MBC}\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Skew} = \frac{A_{MIC}}{A_{MBC}} \]</span> Scores range from 0 to 1, where 0 is the least compact and 1 is the most compact.</p>
<p>Skew compactness can be computed with:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_skew.html">comp_skew</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.3640221 0.2481286</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="x-symmetry-compactness">X-Symmetry Compactness<a class="anchor" aria-label="anchor" href="#x-symmetry-compactness"></a>
</h3>
<p>X-Symmetry compactness compares the area of the intersection of a district reflected over its x-axis (<span class="math inline">\(A(I(D, D^{X}))\)</span>) to the area of the district (<span class="math inline">\(A_D\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{X-Symmetry} = \frac{A(I(D, D^{X}))}{A_D} \]</span> Scores range from 0 to 1, where 0 is the least compact and 1 is the most compact.</p>
<p>X-Symmetry compactness can be computed with:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_x_sym.html">comp_x_sym</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.6995961 0.3436371</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="y-symmetry-compactness">Y-Symmetry Compactness<a class="anchor" aria-label="anchor" href="#y-symmetry-compactness"></a>
</h3>
<p>Y-Symmetry compactness compares the area of the intersection of a district reflected over its y-axis (<span class="math inline">\(A(I(D, D^{Y}))\)</span>) to the area of the district (<span class="math inline">\(A_D\)</span>).</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Y-Symmetry} = \frac{A(I(D, D^{Y}))}{A_D} \]</span> Scores range from 0 to 1, where 0 is the least compact and 1 is the most compact.</p>
<p>Y-Symmetry compactness can be computed with:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_y_sym.html">comp_y_sym</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.7307813 0.4346136</span></code></pre></div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="distance-based-compactness">Distance-Based Compactness<a class="anchor" aria-label="anchor" href="#distance-based-compactness"></a>
</h1>
<div class="section level3">
<h3 id="length-width-compactness">Length-Width Compactness<a class="anchor" aria-label="anchor" href="#length-width-compactness"></a>
</h3>
<p>Length-Width compactness compares the width and the length of a district. Given a bounding box for a district (the rectangle which surrounds a district, with top and bottom parallel to the equator and sides orthogonal to the equator), the width (<span class="math inline">\(W\)</span>) is defined as the shorter side of that box and the length (<span class="math inline">\(L\)</span>) as the longer side of that box.</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Length-Width} = \frac{Width}{Length} \]</span> Scores range from 0 to 1, where 0 is the least compact and 1 is the most compact.</p>
<p>Length-Width compactness can be computed with:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_lw.html">comp_lw</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.9161576 0.5223455</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="boyce-clark-compactness">Boyce-Clark Compactness<a class="anchor" aria-label="anchor" href="#boyce-clark-compactness"></a>
</h3>
<p>Boyce-Clark compactness looks at the distance from the interior center of the shape to 16 evenly spaced radials. The interior center of the shape is defined as the centroid if that is within the shape. If it is not within the shape, we define it using a central point on its surface (using <code><a href="https://paleolimbot.github.io/geos/reference/geos_centroid.html" class="external-link">geos::geos_point_on_surface()</a></code>). With those radials, we compute the distances <span class="math inline">\(d_{r_i}\)</span> for each of the <span class="math inline">\(i = 1:16\)</span> (for the recommended <span class="math inline">\(n = 16\)</span>) radials and look at the mean absolute deviation.</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[\textrm{Boyce-Clark} = \sum_{i=1}^{16}\big|\frac{r_{i}}{\sum_{i=1}^{16} r_i} * 100 - \frac{100}{n}\big|\]</span> Scores range from 0 to <span class="math inline">\(\infty\)</span>, where 0 is the most compact and <span class="math inline">\(\infty\)</span> is the least compact.</p>
<p>Boyce-Clark compactness can be computed with:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_bc.html">comp_bc</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.7921350 0.8330235</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="fryer-holden-compactness">Fryer Holden Compactness<a class="anchor" aria-label="anchor" href="#fryer-holden-compactness"></a>
</h3>
<p>Fryer-Holden describes the person-distance achieved by the plan. Individual scores do not carry much meaning and are intended to be normalized by the minimal possible score, which can be difficult to compute. Given the population of each redistricting unit <span class="math inline">\(P_i\)</span> and the distance between two units <span class="math inline">\(D_{ij}\)</span>, then for any district <span class="math inline">\(k\)</span>, we compute the score as the squared distance between the people in unit <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>.</p>
<p>Formally, the numerator can be written as:</p>
<p><span class="math display">\[\sum_{k = 1}^{n_d} = \sum_{i \in k} \sum{j \in k} P_iP_jD_{ij}^2\]</span> Smaller scores are more compact. When used with a denominator, a score of 1 is most compact and higher scores are less compact.</p>
<p>Fryer-Holden compactness can be computed with:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_fh.html">comp_fh</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, total_pop <span class="op">=</span> <span class="va">pop</span><span class="op">)</span>
<span class="co">#&gt; [1] 5.374691e+22 5.374691e+22</span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="adjacency-based-compactness">Adjacency-Based Compactness<a class="anchor" aria-label="anchor" href="#adjacency-based-compactness"></a>
</h1>
<div class="section level3">
<h3 id="edges-removed-compactness">Edges-Removed Compactness<a class="anchor" aria-label="anchor" href="#edges-removed-compactness"></a>
</h3>
<p>Edges Removed compactness describes the number of edges that have to be removed from an adjacency graph to draw a district. Inuitively, the edges between redistricting units which are in districts are removed. This correlates to Polsby-Popper compactness. For a given adjacency graph <span class="math inline">\(a\)</span>, we can write out the number of edges as <span class="math inline">\(E(a)\)</span> and consider the edges removed for a plan <span class="math inline">\(\pi\)</span>.</p>
<p>Formally, this is then written as:</p>
<p><span class="math display">\[ \textrm{Edges Removed} = E(a) - E_\pi(a)\]</span> Larger scores are less compact.</p>
<p>Edges-Removed compactness can be computed with:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_edges_rem.html">comp_edges_rem</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, adj <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">adj</span><span class="op">)</span>
<span class="co">#&gt; [1] 73 73</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="fraction-kept-compactness">Fraction Kept Compactness<a class="anchor" aria-label="anchor" href="#fraction-kept-compactness"></a>
</h3>
<p>Fraction Kept compactness describes the fraction of edges that have to be kept when an adjacency graph is cut to form a district. This is rescaling of Edges Removed Compactness for more consistent interpretation. For a given adjacency graph <span class="math inline">\(a\)</span>, we can write out the number of edges as <span class="math inline">\(E(a)\)</span> and consider the edges removed for a plan <span class="math inline">\(\pi\)</span>.</p>
<p>Formally, this is then written as:</p>
<p><span class="math display">\[ \textrm{Fraction Kept} = \frac{E(a) - E_\pi(a)}{E(a)}\]</span> Scores range from 0 to 1 where 0 is least compact and 1 is most compact.</p>
<p>Fraction Kept compactness can be computed with:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_frac_kept.html">comp_frac_kept</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, adj <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">adj</span><span class="op">)</span>
<span class="co">#&gt; [1] 0.9584755 0.9584755</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="log-spanning-tree-compactness">Log Spanning Tree Compactness<a class="anchor" aria-label="anchor" href="#log-spanning-tree-compactness"></a>
</h3>
<p>For a given adjacency graph, we can consider some set of spanning trees that can be drawn from it. The number of such spanning trees <span class="math inline">\(n_st\)</span> can be constrained more meaningfully by first drawing spanning trees within districts, which describes the compactness component of the Sequential Monte Carlo (McCartan and Imai 2020) algorithm.</p>
<p>Formally, it can be written as:</p>
<p><span class="math display">\[ \textrm{Log Spanning Tree} = \textrm{log}(n_st)\]</span></p>
<p>A larger number of log spanning trees is more compact.</p>
<p>Log Spanning Tree compactness can be computed with:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/comp_log_st.html">comp_log_st</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, adj <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">adj</span>, counties <span class="op">=</span> <span class="va">county</span><span class="op">)</span>
<span class="co">#&gt; [1] -Inf -Inf</span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="general-notes-on-speed">General Notes on Speed<a class="anchor" aria-label="anchor" href="#general-notes-on-speed"></a>
</h1>
<p>Compactness scores can be slow to compute, especially when comparing 1000s of plans with thousands of geographic units. Some basic recommendations:</p>
<ul>
<li>Avoid computing with block-level data where possible. Precincts or voter tabulation districts tend to be 1/100th of the units and compute much faster</li>
<li>Use <code>rmapshaper::ms_simplify()</code> to simplify if a small degree of accuracy loss is acceptable</li>
<li>Pre-compute <code><a href="../reference/prep_perims.html">prep_perims()</a></code> once and save the output if relying on Polsby-Popper for more than a single plan.</li>
</ul>
<p>A rough ordering of speeds to compute:</p>
<ol style="list-style-type: decimal">
<li>Scores based on adjacency (Log Spanning Tree, Edges Removed, Fraction Kept)</li>
<li>Scores with Rcpp implementations with <code>useRcpp = TRUE</code> (Polsby-Popper, Schwartzberg)</li>
<li>Scores that can pre-process geographic operations (Fryer-Holden, Length-Width)</li>
<li>Scores that can utilize pre-computed areas (Box Reock, Reock, Convex Hull)</li>
<li>Scores that require multiple plan-level geographic computations (Skew, X-Symmetry, Y-Symmetry)</li>
<li>Scores that that require creating many new geographic objects per plan (Boyce-Clark)</li>
</ol>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Christopher T. Kenny, Cory McCartan, Ben Fifield, Kosuke Imai.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
