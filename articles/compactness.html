<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Measures of Compactness • redistmetrics</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Measures of Compactness">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">redistmetrics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/redistmetrics.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/party.html">Measures of Partisan Advantage</a>
    </li>
    <li>
      <a href="../articles/compactness.html">Measures of Compactness</a>
    </li>
    <li>
      <a href="../articles/splits.html">Measures of Administrative Splits</a>
    </li>
    <li>
      <a href="../articles/distances.html">Measures of Plan Distance</a>
    </li>
    <li>
      <a href="../articles/other.html">Other Measures</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/alarm-redist/redistmetrics/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Measures of Compactness</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/alarm-redist/redistmetrics/blob/main/vignettes/compactness.Rmd" class="external-link"><code>vignettes/compactness.Rmd</code></a></small>
      <div class="hidden name"><code>compactness.Rmd</code></div>

    </div>

    
    
<p>There are dozens of measures of compactness. This vignette introduces
some of the most common and most important measures of compactness. See
the vignette “Using <code>redistmetrics</code>” for the bare-bones of
the package.</p>
<p>We first load the <code>redistmetrics</code> package and data from
New Hampshire. For any function, the <code>shp</code> argument can be
swapped out for your data and the <code>plans</code> argument can be
swapped out for your redistricting plans (be it a single plan, a matrix
of plans, or a <code>redist_plans</code> object).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://alarm-redist.org/redistmetrics/" class="external-link">redistmetrics</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">nh</span><span class="op">)</span></span></code></pre></div>
<p>The New Hampshire proposed Republican plan looks like:</p>
<p><img src="compactness_files/figure-html/unnamed-chunk-2-1.png" class="r-plt" width="700"></p>
<div class="section level2">
<h2 id="area-based-compactness">Area-Based Compactness<a class="anchor" aria-label="anchor" href="#area-based-compactness"></a>
</h2>
<div class="section level3">
<h3 id="polsby-popper-compactness">Polsby-Popper Compactness<a class="anchor" aria-label="anchor" href="#polsby-popper-compactness"></a>
</h3>
<p>Polsby-Popper is proportional to the ratio of a districts area
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>D</mi></msub><annotation encoding="application/x-tex">A_D</annotation></semantics></math>)
and its perimeter
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mi>D</mi></msub><annotation encoding="application/x-tex">P_D</annotation></semantics></math>).
Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Polsby-Popper</mtext><mo>=</mo><mn>4</mn><mi>π</mi><mfrac><msub><mi>A</mi><mi>D</mi></msub><msubsup><mi>P</mi><mi>D</mi><mn>2</mn></msubsup></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Polsby-Popper} = 4\pi\frac{A_D}{P_D^2}</annotation></semantics></math>
Scores range from 0 to 1, where 0 is the least compact and 1 is the most
compact.</p>
<p>Polsby-Popper compactness can be computed with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_polsby.html">comp_polsby</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.2324375 0.1582763</span></span></code></pre></div>
<div class="section level4">
<h4 id="schwartzberg-compactness">Schwartzberg Compactness<a class="anchor" aria-label="anchor" href="#schwartzberg-compactness"></a>
</h4>
<p>Schwartzberg Compactness is similar to Polsby-Popper compactness and
is also based on the comparison of a district’s perimeter
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mi>D</mi></msub><annotation encoding="application/x-tex">P_D</annotation></semantics></math>)
to its area
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>D</mi></msub><annotation encoding="application/x-tex">A_D</annotation></semantics></math>).
Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Schwartzberg</mtext><mo>=</mo><mfrac><mn>1</mn><mfrac><msub><mi>P</mi><mi>D</mi></msub><mrow><mn>2</mn><mi>π</mi><msqrt><mrow><msub><mi>A</mi><mi>D</mi></msub><mi>/</mi><mi>π</mi></mrow></msqrt></mrow></mfrac></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Schwartzberg} = \frac{1}{\frac{P_D}{2\pi\sqrt{A_D/\pi}}}</annotation></semantics></math></p>
<p>Scores range from 0 to 1, where 0 is the least compact and 1 is the
most compact.</p>
<p>Schwartzberg compactness can be computed with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_schwartz.html">comp_schwartz</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.4821177 0.3978395</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="reock-compactness">Reock Compactness<a class="anchor" aria-label="anchor" href="#reock-compactness"></a>
</h4>
<p>Reock compactness compares the area of the district
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>D</mi></msub><annotation encoding="application/x-tex">A_D</annotation></semantics></math>)
to the area of the minimum bounding circle
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mrow><mi>M</mi><mi>B</mi><mi>C</mi></mrow></msub><annotation encoding="application/x-tex">A_{MBC}</annotation></semantics></math>).</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Reock</mtext><mo>=</mo><mfrac><msub><mi>A</mi><mi>D</mi></msub><msub><mi>A</mi><mrow><mi>M</mi><mi>B</mi><mi>C</mi></mrow></msub></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Reock} = \frac{A_D}{A_{MBC}} </annotation></semantics></math>
Scores range from 0 to 1, where 0 is the least compact and 1 is the most
compact.</p>
<p>Reock compactness can be computed with:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_reock.html">comp_reock</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.4444653 0.2502152</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="box-reock-compactness">Box Reock Compactness<a class="anchor" aria-label="anchor" href="#box-reock-compactness"></a>
</h4>
<p>Box Reock compactness compares the area of the district
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>D</mi></msub><annotation encoding="application/x-tex">A_D</annotation></semantics></math>)
to the area of the minimum bounding rectangle
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mrow><mi>M</mi><mi>B</mi><mi>R</mi></mrow></msub><annotation encoding="application/x-tex">A_{MBR}</annotation></semantics></math>).</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Box Reock</mtext><mo>=</mo><mfrac><msub><mi>A</mi><mi>D</mi></msub><msub><mi>A</mi><mrow><mi>M</mi><mi>B</mi><mi>R</mi></mrow></msub></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Box Reock} = \frac{A_D}{A_{MBR}} </annotation></semantics></math></p>
<p>Scores range from 0 to 1, where 0 is the least compact and 1 is the
most compact.</p>
<p>Box Reock compactness can be computed with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_box_reock.html">comp_box_reock</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.5769441 0.4196260</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="bounding-box-reock-compactness">Bounding Box Reock Compactness<a class="anchor" aria-label="anchor" href="#bounding-box-reock-compactness"></a>
</h4>
<p>Bounding Box Reock compactness compares the area of the district
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>D</mi></msub><annotation encoding="application/x-tex">A_D</annotation></semantics></math>)
to the area of the bounding box
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mrow><mi>B</mi><mi>B</mi></mrow></msub><annotation encoding="application/x-tex">A_{BB}</annotation></semantics></math>).</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Bounding Box Reock</mtext><mo>=</mo><mfrac><msub><mi>A</mi><mi>D</mi></msub><msub><mi>A</mi><mrow><mi>B</mi><mi>B</mi></mrow></msub></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Bounding Box Reock} = \frac{A_D}{A_{BB}} </annotation></semantics></math></p>
<p>Scores range from 0 to 1, where 0 is the least compact and 1 is the
most compact.</p>
<p>Bounding Box Reock compactness can be computed with:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_bounding_box_reock.html">comp_bounding_box_reock</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.4380166 0.4194030</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="convex-hull-compactness">Convex Hull Compactness<a class="anchor" aria-label="anchor" href="#convex-hull-compactness"></a>
</h4>
<p>Convex Hull compactness compares the area of the district
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>D</mi></msub><annotation encoding="application/x-tex">A_D</annotation></semantics></math>)
to the area of the convex hull
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mrow><mi>C</mi><mi>V</mi></mrow></msub><annotation encoding="application/x-tex">A_{CV}</annotation></semantics></math>).</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Convex Hull</mtext><mo>=</mo><mfrac><msub><mi>A</mi><mi>D</mi></msub><msub><mi>A</mi><mrow><mi>C</mi><mi>V</mi></mrow></msub></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Convex Hull} = \frac{A_D}{A_{CV}} </annotation></semantics></math>
Scores range from 0 to 1, where 0 is the least compact and 1 is the most
compact.</p>
<p>Convex Hull compactness can be computed with:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_ch.html">comp_ch</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.6763964 0.6626738</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="skew-compactness">Skew Compactness<a class="anchor" aria-label="anchor" href="#skew-compactness"></a>
</h4>
<p>Skew compactness compares the area of the maximum inscribed circle
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mrow><mi>M</mi><mi>I</mi><mi>C</mi></mrow></msub><annotation encoding="application/x-tex">A_{MIC}</annotation></semantics></math>)
to the area of the minimum bounding circle
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mrow><mi>M</mi><mi>B</mi><mi>C</mi></mrow></msub><annotation encoding="application/x-tex">A_{MBC}</annotation></semantics></math>).</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Skew</mtext><mo>=</mo><mfrac><msub><mi>A</mi><mrow><mi>M</mi><mi>I</mi><mi>C</mi></mrow></msub><msub><mi>A</mi><mrow><mi>M</mi><mi>B</mi><mi>C</mi></mrow></msub></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Skew} = \frac{A_{MIC}}{A_{MBC}} </annotation></semantics></math>
Scores range from 0 to 1, where 0 is the least compact and 1 is the most
compact.</p>
<p>Skew compactness can be computed with:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_skew.html">comp_skew</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.3640221 0.2481286</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="x-symmetry-compactness">X-Symmetry Compactness<a class="anchor" aria-label="anchor" href="#x-symmetry-compactness"></a>
</h4>
<p>X-Symmetry compactness compares the area of the intersection of a
district reflected over its x-axis
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>I</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>D</mi><mo>,</mo><msup><mi>D</mi><mi>X</mi></msup><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">A(I(D, D^{X}))</annotation></semantics></math>)
to the area of the district
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>D</mi></msub><annotation encoding="application/x-tex">A_D</annotation></semantics></math>).</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">X-Symmetry</mtext><mo>=</mo><mfrac><mrow><mi>A</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>I</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>D</mi><mo>,</mo><msup><mi>D</mi><mi>X</mi></msup><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><msub><mi>A</mi><mi>D</mi></msub></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{X-Symmetry} = \frac{A(I(D, D^{X}))}{A_D} </annotation></semantics></math>
Scores range from 0 to 1, where 0 is the least compact and 1 is the most
compact.</p>
<p>X-Symmetry compactness can be computed with:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_x_sym.html">comp_x_sym</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.6995961 0.3436371</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="y-symmetry-compactness">Y-Symmetry Compactness<a class="anchor" aria-label="anchor" href="#y-symmetry-compactness"></a>
</h4>
<p>Y-Symmetry compactness compares the area of the intersection of a
district reflected over its y-axis
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>I</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>D</mi><mo>,</mo><msup><mi>D</mi><mi>Y</mi></msup><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">A(I(D, D^{Y}))</annotation></semantics></math>)
to the area of the district
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>A</mi><mi>D</mi></msub><annotation encoding="application/x-tex">A_D</annotation></semantics></math>).</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Y-Symmetry</mtext><mo>=</mo><mfrac><mrow><mi>A</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>I</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>D</mi><mo>,</mo><msup><mi>D</mi><mi>Y</mi></msup><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><msub><mi>A</mi><mi>D</mi></msub></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Y-Symmetry} = \frac{A(I(D, D^{Y}))}{A_D} </annotation></semantics></math>
Scores range from 0 to 1, where 0 is the least compact and 1 is the most
compact.</p>
<p>Y-Symmetry compactness can be computed with:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_y_sym.html">comp_y_sym</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.7307813 0.4346136</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="distance-based-compactness">Distance-Based Compactness<a class="anchor" aria-label="anchor" href="#distance-based-compactness"></a>
</h2>
<div class="section level4">
<h4 id="length-width-compactness">Length-Width Compactness<a class="anchor" aria-label="anchor" href="#length-width-compactness"></a>
</h4>
<p>Length-Width compactness compares the width and the length of a
district. Given a bounding box for a district (the rectangle which
surrounds a district, with top and bottom parallel to the equator and
sides orthogonal to the equator), the width
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>)
is defined as the shorter side of that box and the length
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>L</mi><annotation encoding="application/x-tex">L</annotation></semantics></math>)
as the longer side of that box.</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Length-Width</mtext><mo>=</mo><mfrac><mrow><mi>W</mi><mi>i</mi><mi>d</mi><mi>t</mi><mi>h</mi></mrow><mrow><mi>L</mi><mi>e</mi><mi>n</mi><mi>g</mi><mi>t</mi><mi>h</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Length-Width} = \frac{Width}{Length} </annotation></semantics></math>
Scores range from 0 to 1, where 0 is the least compact and 1 is the most
compact.</p>
<p>Length-Width compactness can be computed with:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_lw.html">comp_lw</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.9161576 0.5223455</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="boyce-clark-compactness">Boyce-Clark Compactness<a class="anchor" aria-label="anchor" href="#boyce-clark-compactness"></a>
</h4>
<p>Boyce-Clark compactness looks at the distance from the interior
center of the shape to 16 evenly spaced radials. The interior center of
the shape is defined as the centroid if that is within the shape. If it
is not within the shape, we define it using a central point on its
surface (using <code><a href="https://paleolimbot.github.io/geos/reference/geos_centroid.html" class="external-link">geos::geos_point_on_surface()</a></code>). With those
radials, we compute the distances
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>d</mi><msub><mi>r</mi><mi>i</mi></msub></msub><annotation encoding="application/x-tex">d_{r_i}</annotation></semantics></math>
for each of the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo>:</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">i = 1:16</annotation></semantics></math>
(for the recommended
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mn>16</mn></mrow><annotation encoding="application/x-tex">n = 16</annotation></semantics></math>)
radials and look at the mean absolute deviation.</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Boyce-Clark</mtext><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>16</mn></munderover><mo minsize="1.2" maxsize="1.2" stretchy="false" form="prefix">|</mo><mfrac><msub><mi>r</mi><mi>i</mi></msub><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>16</mn></munderover><msub><mi>r</mi><mi>i</mi></msub></mrow></mfrac><mo>*</mo><mn>100</mn><mo>−</mo><mfrac><mn>100</mn><mi>n</mi></mfrac><mo minsize="1.2" maxsize="1.2" stretchy="false" form="prefix">|</mo></mrow><annotation encoding="application/x-tex">\textrm{Boyce-Clark} = \sum_{i=1}^{16}\big|\frac{r_{i}}{\sum_{i=1}^{16} r_i} * 100 - \frac{100}{n}\big|</annotation></semantics></math>
Scores range from 0 to
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>∞</mi><annotation encoding="application/x-tex">\infty</annotation></semantics></math>,
where 0 is the most compact and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>∞</mi><annotation encoding="application/x-tex">\infty</annotation></semantics></math>
is the least compact.</p>
<p>Boyce-Clark compactness can be computed with:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_bc.html">comp_bc</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.7921350 0.8330235</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fryer-holden-compactness">Fryer Holden Compactness<a class="anchor" aria-label="anchor" href="#fryer-holden-compactness"></a>
</h4>
<p>Fryer-Holden describes the person-distance achieved by the plan.
Individual scores do not carry much meaning and are intended to be
normalized by the minimal possible score, which can be difficult to
compute. Given the population of each redistricting unit
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>P</mi><mi>i</mi></msub><annotation encoding="application/x-tex">P_i</annotation></semantics></math>
and the distance between two units
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">D_{ij}</annotation></semantics></math>,
then for any district
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>,
we compute the score as the squared distance between the people in unit
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>.</p>
<p>Formally, the numerator can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><msub><mi>n</mi><mi>d</mi></msub></munderover><mo>=</mo><munder><mo>∑</mo><mrow><mi>i</mi><mo>∈</mo><mi>k</mi></mrow></munder><mo>∑</mo><mrow><mi>j</mi><mo>∈</mo><mi>k</mi></mrow><msub><mi>P</mi><mi>i</mi></msub><msub><mi>P</mi><mi>j</mi></msub><msubsup><mi>D</mi><mrow><mi>i</mi><mi>j</mi></mrow><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">\sum_{k = 1}^{n_d} = \sum_{i \in k} \sum{j \in k} P_iP_jD_{ij}^2</annotation></semantics></math>
Smaller scores are more compact. When used with a denominator, a score
of 1 is most compact and higher scores are less compact.</p>
<p>Fryer-Holden compactness can be computed with:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_fh.html">comp_fh</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, total_pop <span class="op">=</span> <span class="va">pop</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5.374691e+22 5.374691e+22</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="adjacency-based-compactness">Adjacency-Based Compactness<a class="anchor" aria-label="anchor" href="#adjacency-based-compactness"></a>
</h2>
<div class="section level4">
<h4 id="edges-removed-compactness">Edges-Removed Compactness<a class="anchor" aria-label="anchor" href="#edges-removed-compactness"></a>
</h4>
<p>Edges Removed compactness describes the number of edges that have to
be removed from an adjacency graph to draw a district. Inuitively, the
edges between redistricting units which are in districts are removed.
This correlates to Polsby-Popper compactness. For a given adjacency
graph
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>a</mi><annotation encoding="application/x-tex">a</annotation></semantics></math>,
we can write out the number of edges as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">E(a)</annotation></semantics></math>
and consider the edges removed for a plan
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>π</mi><annotation encoding="application/x-tex">\pi</annotation></semantics></math>.</p>
<p>Formally, this is then written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Edges Removed</mtext><mo>=</mo><mi>E</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>−</mo><msub><mi>E</mi><mi>π</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> \textrm{Edges Removed} = E(a) - E_\pi(a)</annotation></semantics></math>
Larger scores are less compact.</p>
<p>Edges-Removed compactness can be computed with:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_edges_rem.html">comp_edges_rem</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, adj <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">adj</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 73 73</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="fraction-kept-compactness">Fraction Kept Compactness<a class="anchor" aria-label="anchor" href="#fraction-kept-compactness"></a>
</h4>
<p>Fraction Kept compactness describes the fraction of edges that have
to be kept when an adjacency graph is cut to form a district. This is
rescaling of Edges Removed Compactness for more consistent
interpretation. For a given adjacency graph
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>a</mi><annotation encoding="application/x-tex">a</annotation></semantics></math>,
we can write out the number of edges as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">E(a)</annotation></semantics></math>
and consider the edges removed for a plan
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>π</mi><annotation encoding="application/x-tex">\pi</annotation></semantics></math>.</p>
<p>Formally, this is then written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Fraction Kept</mtext><mo>=</mo><mfrac><mrow><mi>E</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>−</mo><msub><mi>E</mi><mi>π</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mi>E</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>a</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex"> \textrm{Fraction Kept} = \frac{E(a) - E_\pi(a)}{E(a)}</annotation></semantics></math>
Scores range from 0 to 1 where 0 is least compact and 1 is most
compact.</p>
<p>Fraction Kept compactness can be computed with:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_frac_kept.html">comp_frac_kept</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, adj <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">adj</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.9584755 0.9584755</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="log-spanning-tree-compactness">Log Spanning Tree Compactness<a class="anchor" aria-label="anchor" href="#log-spanning-tree-compactness"></a>
</h4>
<p>For a given adjacency graph, we can consider some set of spanning
trees that can be drawn from it. The number of such spanning trees
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mi>s</mi></msub><mi>t</mi></mrow><annotation encoding="application/x-tex">n_st</annotation></semantics></math>
can be constrained more meaningfully by first drawing spanning trees
within districts, which describes the compactness component of the
Sequential Monte Carlo (McCartan and Imai 2020) algorithm.</p>
<p>Formally, it can be written as:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext mathvariant="normal">Log Spanning Tree</mtext><mo>=</mo><mtext mathvariant="normal">log</mtext><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>n</mi><mi>s</mi></msub><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex"> \textrm{Log Spanning Tree} = \textrm{log}(n_st)</annotation></semantics></math></p>
<p>A larger number of log spanning trees is more compact.</p>
<p>Log Spanning Tree compactness can be computed with:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comp_log_st.html">comp_log_st</a></span><span class="op">(</span>plans <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">r_2020</span>, shp <span class="op">=</span> <span class="va">nh</span>, adj <span class="op">=</span> <span class="va">nh</span><span class="op">$</span><span class="va">adj</span>, counties <span class="op">=</span> <span class="va">county</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] -Inf -Inf</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="general-notes-on-speed">General Notes on Speed<a class="anchor" aria-label="anchor" href="#general-notes-on-speed"></a>
</h2>
<p>Compactness scores can be slow to compute, especially when comparing
1000s of plans with thousands of geographic units. Some basic
recommendations:</p>
<ul>
<li>Avoid computing with block-level data where possible. Precincts or
voter tabulation districts tend to be 1/100th of the units and compute
much faster</li>
<li>Use <code>rmapshaper::ms_simplify()</code> to simplify if a small
degree of accuracy loss is acceptable</li>
<li>Pre-compute <code><a href="../reference/prep_perims.html">prep_perims()</a></code> once and save the output if
relying on Polsby-Popper for more than a single plan.</li>
</ul>
<p>A rough ordering of speeds to compute:</p>
<ol style="list-style-type: decimal">
<li>Scores based on adjacency (Log Spanning Tree, Edges Removed,
Fraction Kept)</li>
<li>Scores with Rcpp implementations with <code>useRcpp = TRUE</code>
(Polsby-Popper, Schwartzberg)</li>
<li>Scores that can pre-process geographic operations (Fryer-Holden,
Length-Width)</li>
<li>Scores that can utilize pre-computed areas (Box Reock, Reock, Convex
Hull)</li>
<li>Scores that require multiple plan-level geographic computations
(Skew, X-Symmetry, Y-Symmetry)</li>
<li>Scores that that require creating many new geographic objects per
plan (Boyce-Clark)</li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Christopher T. Kenny, Cory McCartan, Ben Fifield, Kosuke Imai.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
